<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<link rel='stylesheet' href='/stylesheets/style.css'/>
<meta name="viewport" content="initial-scale=1.0"/>

<label for="text"></label>
<textarea id="text"></textarea>

<script>
    var tArea = $('#text');
    tArea.focus();

    io = io.connect();
    io.emit('ready', {"room": window.location.href});

    io.on('announce', function() {
        io.emit('update', {"message": $('#text').val(), "room": window.location.href});
    });

    io.on('update', function(data) {
        tArea.val(data.message);
        tArea.blur();
    });

    tArea.bind('input', function() {
        io.emit('update', {"message": $('#text').val(), "room": window.location.href})
    });
</script>